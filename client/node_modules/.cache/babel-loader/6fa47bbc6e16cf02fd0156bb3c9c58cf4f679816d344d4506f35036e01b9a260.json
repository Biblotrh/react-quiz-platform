{"ast":null,"code":"import { create } from 'zustand';\nimport { devtools } from \"zustand/middleware\";\nimport { immer } from 'zustand/middleware/immer';\nimport API from './../api/axiosConfig';\nconst useHomeStore = create()(devtools(immer((set, get) => ({\n  tests: null,\n  searchVal: '',\n  currentPage: 1,\n  totalPages: 10,\n  isLoading: false,\n  getTests: async () => {\n    set({\n      isLoading: true\n    });\n    await API.get(`/tests`).then(res => {\n      set({\n        tests: res.data.tests\n      });\n      set({\n        isLoading: false\n      });\n    });\n  },\n  searchTests: async () => {\n    set({\n      isLoading: true\n    });\n    await API.post(`/tests/search`, {\n      name: get().searchVal\n    }).then(res => {\n      if (res.data.tests.length) {\n        set({\n          tests: res.data.tests\n        });\n        set({\n          isLoading: false\n        });\n      } else {\n        set({\n          tests: null\n        });\n        set({\n          isLoading: false\n        });\n      }\n    }).catch(err => console.log(err));\n  },\n  handleSearchVal: val => {\n    set({\n      searchVal: val\n    });\n  },\n  setPagination: async () => {\n    await API.get(`/testsPagination?page=${get().currentPage}&limit=1`).then(res => {\n      if (res.data.totalPages && res.data.tests.length) {\n        set({\n          totalPages: Number(res.data.totalPages)\n        });\n        set({\n          tests: res.data.tests\n        });\n      }\n    }).catch(err => console.log(err));\n  },\n  setCurrentPage: page => {\n    set({\n      currentPage: page\n    });\n  }\n}))));\nexport default useHomeStore;","map":{"version":3,"names":["create","devtools","immer","API","useHomeStore","set","get","tests","searchVal","currentPage","totalPages","isLoading","getTests","then","res","data","searchTests","post","name","length","catch","err","console","log","handleSearchVal","val","setPagination","Number","setCurrentPage","page"],"sources":["C:/Users/DoC/Desktop/works/ptest/client/src/stores/homeStore.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport { devtools } from \"zustand/middleware\";\r\nimport { immer } from 'zustand/middleware/immer';\r\nimport API from './../api/axiosConfig';\r\nimport { Test } from './testStore';\r\n\r\n\r\nexport interface TestData extends Test {\r\n    authorsName: string,\r\n}\r\n\r\ninterface IStore {\r\n    tests: TestData[] | null,\r\n    searchVal: string,\r\n    currentPage: number,\r\n    totalPages: number,\r\n    isLoading: boolean,\r\n    getTests: () => void,\r\n    searchTests: () => void,\r\n    handleSearchVal: (val: string) => void,\r\n    setPagination: () => void,\r\n    setCurrentPage: (page: number) => void,\r\n}\r\n\r\nconst useHomeStore = create<IStore>()(devtools(immer((set, get) => ({\r\n    tests: null,\r\n    searchVal: '',\r\n    currentPage: 1,\r\n    totalPages: 10,\r\n    isLoading: false,\r\n    getTests: async () => {\r\n        set({ isLoading: true });\r\n        await API.get(`/tests`).then(res => {\r\n            set({ tests: res.data.tests });\r\n            set({ isLoading: false });\r\n        })\r\n    },\r\n    searchTests: async () => {\r\n        set({ isLoading: true });\r\n        await API.post(`/tests/search`, { name: get().searchVal }).then(res => {\r\n            if (res.data.tests.length) {\r\n                set({ tests: res.data.tests });\r\n                set({ isLoading: false });\r\n            } else {\r\n                set({ tests: null });\r\n                set({ isLoading: false });\r\n            }\r\n        }).catch(err => console.log(err));\r\n    },\r\n    handleSearchVal: (val: string) => {\r\n        set({ searchVal: val });\r\n    },\r\n    setPagination: async () => {\r\n        await API.get(`/testsPagination?page=${get().currentPage}&limit=1`).then(res => {\r\n            if(res.data.totalPages && res.data.tests.length) {\r\n                set({totalPages: Number(res.data.totalPages)});\r\n                set({tests: res.data.tests});\r\n            }\r\n        }).catch(err => console.log(err));\r\n    },\r\n    setCurrentPage: (page: number) => {\r\n        set({currentPage: page});\r\n    }\r\n}))));\r\n\r\nexport default useHomeStore;"],"mappings":"AAAA,SAASA,MAAM,QAAQ,SAAS;AAChC,SAASC,QAAQ,QAAQ,oBAAoB;AAC7C,SAASC,KAAK,QAAQ,0BAA0B;AAChD,OAAOC,GAAG,MAAM,sBAAsB;AAqBtC,MAAMC,YAAY,GAAGJ,MAAM,CAAS,CAAC,CAACC,QAAQ,CAACC,KAAK,CAAC,CAACG,GAAG,EAAEC,GAAG,MAAM;EAChEC,KAAK,EAAE,IAAI;EACXC,SAAS,EAAE,EAAE;EACbC,WAAW,EAAE,CAAC;EACdC,UAAU,EAAE,EAAE;EACdC,SAAS,EAAE,KAAK;EAChBC,QAAQ,EAAE,MAAAA,CAAA,KAAY;IAClBP,GAAG,CAAC;MAAEM,SAAS,EAAE;IAAK,CAAC,CAAC;IACxB,MAAMR,GAAG,CAACG,GAAG,CAAC,QAAQ,CAAC,CAACO,IAAI,CAACC,GAAG,IAAI;MAChCT,GAAG,CAAC;QAAEE,KAAK,EAAEO,GAAG,CAACC,IAAI,CAACR;MAAM,CAAC,CAAC;MAC9BF,GAAG,CAAC;QAAEM,SAAS,EAAE;MAAM,CAAC,CAAC;IAC7B,CAAC,CAAC;EACN,CAAC;EACDK,WAAW,EAAE,MAAAA,CAAA,KAAY;IACrBX,GAAG,CAAC;MAAEM,SAAS,EAAE;IAAK,CAAC,CAAC;IACxB,MAAMR,GAAG,CAACc,IAAI,CAAC,eAAe,EAAE;MAAEC,IAAI,EAAEZ,GAAG,CAAC,CAAC,CAACE;IAAU,CAAC,CAAC,CAACK,IAAI,CAACC,GAAG,IAAI;MACnE,IAAIA,GAAG,CAACC,IAAI,CAACR,KAAK,CAACY,MAAM,EAAE;QACvBd,GAAG,CAAC;UAAEE,KAAK,EAAEO,GAAG,CAACC,IAAI,CAACR;QAAM,CAAC,CAAC;QAC9BF,GAAG,CAAC;UAAEM,SAAS,EAAE;QAAM,CAAC,CAAC;MAC7B,CAAC,MAAM;QACHN,GAAG,CAAC;UAAEE,KAAK,EAAE;QAAK,CAAC,CAAC;QACpBF,GAAG,CAAC;UAAEM,SAAS,EAAE;QAAM,CAAC,CAAC;MAC7B;IACJ,CAAC,CAAC,CAACS,KAAK,CAACC,GAAG,IAAIC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAAC;EACrC,CAAC;EACDG,eAAe,EAAGC,GAAW,IAAK;IAC9BpB,GAAG,CAAC;MAAEG,SAAS,EAAEiB;IAAI,CAAC,CAAC;EAC3B,CAAC;EACDC,aAAa,EAAE,MAAAA,CAAA,KAAY;IACvB,MAAMvB,GAAG,CAACG,GAAG,CAAC,yBAAyBA,GAAG,CAAC,CAAC,CAACG,WAAW,UAAU,CAAC,CAACI,IAAI,CAACC,GAAG,IAAI;MAC5E,IAAGA,GAAG,CAACC,IAAI,CAACL,UAAU,IAAII,GAAG,CAACC,IAAI,CAACR,KAAK,CAACY,MAAM,EAAE;QAC7Cd,GAAG,CAAC;UAACK,UAAU,EAAEiB,MAAM,CAACb,GAAG,CAACC,IAAI,CAACL,UAAU;QAAC,CAAC,CAAC;QAC9CL,GAAG,CAAC;UAACE,KAAK,EAAEO,GAAG,CAACC,IAAI,CAACR;QAAK,CAAC,CAAC;MAChC;IACJ,CAAC,CAAC,CAACa,KAAK,CAACC,GAAG,IAAIC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAAC;EACrC,CAAC;EACDO,cAAc,EAAGC,IAAY,IAAK;IAC9BxB,GAAG,CAAC;MAACI,WAAW,EAAEoB;IAAI,CAAC,CAAC;EAC5B;AACJ,CAAC,CAAC,CAAC,CAAC,CAAC;AAEL,eAAezB,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}